# MicroBoard 기능 설명서

## 📋 목차
- [핵심 기능](#핵심-기능)
- [게시판 시스템](#게시판-시스템)
- [회원 관리](#회원-관리)
- [소셜 로그인](#소셜-로그인)
- [포인트 시스템](#포인트-시스템)
- [플러그인 시스템](#플러그인-시스템)
- [다국어 지원](#다국어-지원)
- [관리자 기능](#관리자-기능)
- [보안 기능](#보안-기능)

---

## 🌟 핵심 기능

MicroBoard는 경량화된 고성능 게시판 시스템으로, 복잡한 대형 CMS 없이도 강력한 커뮤니티 플랫폼을 구축할 수 있습니다.

### 주요 특징
- ⚡ **경량 & 고속**: 최소한의 의존성으로 최적화된 성능
- 🌍 **글로벌 지원**: 4개 언어 지원 (한국어, 영어, 일본어, 중국어)
- 🔐 **강력한 보안**: CSRF, SQL Injection, XSS 보호
- 📱 **반응형 디자인**: 모든 디바이스에서 완벽한 사용자 경험
- 🔌 **확장 가능**: 플러그인 시스템으로 무한 확장

---

## 📝 게시판 시스템

### 게시판 기본 기능
MicroBoard의 게시판은 직관적이고 강력한 기능을 제공합니다.

#### ✨ 게시글 작성
- **WYSIWYG 에디터**: Summernote 에디터로 풍부한 텍스트 편집
- **이미지 업로드**: 드래그 앤 드롭으로 간편한 이미지 첨부
- **파일 첨부**: 다양한 파일 형식 지원
- **실시간 미리보기**: 작성 중 즉시 확인 가능

#### 🔍 검색 기능
- **통합 검색**: 제목, 내용, 작성자 통합 검색
- **필터링**: 특정 필드만 선택하여 검색
- **정렬**: 최신순, 조회수순 정렬 지원

#### 💬 댓글 시스템
- **계층형 댓글**: 댓글과 대댓글 지원
- **실시간 등록**: 페이지 새로고침 없이 댓글 작성
- **작성자 표시**: 댓글 작성자 정보 표시

#### 📊 조회수 추적
- **IP 기반 중복 방지**: 중복 조회수 방지
- **실시간 집계**: 조회수 실시간 업데이트

#### 📂 파일 관리
- **다중 파일 첨부**: 여러 파일 동시 업로드
- **파일 다운로드**: 첨부 파일 다운로드 및 카운팅
- **자동 정리**: 게시글 삭제 시 관련 파일 자동 삭제

---

## 👥 회원 관리

### 회원 가입 및 인증

#### 📋 회원 가입
- **간편한 가입 절차**: 아이디와 비밀번호만으로 가입
- **실시간 중복 체크**: 아이디 중복 여부 즉시 확인
- **비밀번호 암호화**: bcrypt를 이용한 안전한 비밀번호 저장
- **입력 검증**: 서버 측 입력값 검증으로 보안 강화

#### 🔐 로그인 시스템
- **세션 관리**: 안전한 세션 기반 인증
- **자동 로그아웃**: 30분 비활성 시 자동 로그아웃
- **Remember Me**: 로그인 상태 유지 옵션
- **다중 로그인 방식**: 일반 로그인 + 소셜 로그인

### 회원 등급 시스템

#### 🏆 등급 관리
- **10단계 등급**: 1~10 레벨 회원 등급 시스템
- **등급별 권한**: 등급에 따른 게시판 접근 제어
- **자동 승급**: 활동 포인트에 따른 자동 등급 조정 (선택 사항)
- **수동 관리**: 관리자가 직접 등급 조정 가능

#### 🚫 회원 제재
- **차단 기능**: 문제 회원 접근 차단
- **차단 사유 기록**: 차단 이유 및 날짜 기록
- **차단 해제**: 관리자가 언제든 차단 해제 가능
- **자동 알림**: 차단된 회원에게 사유 표시

#### 👤 회원 프로필
- **활동 내역**: 작성한 게시글 및 댓글 조회
- **포인트 내역**: 적립/차감 포인트 상세 기록
- **가입 정보**: 가입일, 최근 접속일 표시

---

## 🔐 소셜 로그인 (OAuth)

MicroBoard는 주요 소셜 플랫폼과의 원활한 통합을 제공합니다.

### 지원 플랫폼

#### 🔵 Google OAuth
- **Google 계정 로그인**: Google 계정으로 원클릭 로그인
- **자동 계정 생성**: 최초 로그인 시 자동으로 회원 생성
- **프로필 연동**: Google 프로필 정보 자동 가져오기
- **설정**: [Google Cloud Console](https://console.cloud.google.com/)에서 설정

#### 🟢 LINE OAuth
- **LINE 계정 로그인**: LINE 앱과 연동된 로그인
- **모바일 최적화**: 모바일 환경에 최적화된 로그인 플로우
- **자동 계정 생성**: 최초 로그인 시 자동 회원 생성
- **설정**: [LINE Developers](https://developers.line.biz/)에서 설정

#### ⚫ Apple OAuth
- **Apple로 로그인**: Apple ID를 이용한 보안 로그인
- **개인정보 보호**: Apple의 강력한 개인정보 보호 기능
- **iOS 최적화**: iOS/macOS 기기에서 최적화된 경험
- **설정**: [Apple Developer](https://developer.apple.com/)에서 설정

### OAuth 특징
- ✅ **자동 버튼 표시**: 설정 완료 시 자동으로 로그인 버튼 표시
- ✅ **상태 표시**: 관리자 페이지에서 OAuth 설정 상태 확인
- ✅ **CSRF 보호**: State 파라미터로 CSRF 공격 방지
- ✅ **에러 처리**: 상세한 에러 메시지와 로깅
- ✅ **다국어 지원**: 모든 OAuth 플로우에서 다국어 지원

### 설정 방법
1. 관리자 페이지 접속 (`/admin/oauth.php`)
2. 각 플랫폼별 Client ID 및 Secret 입력
3. 활성화 체크박스 선택
4. 저장하면 자동으로 로그인 버튼 표시

---

## ⭐ 포인트 시스템

회원 활동을 장려하는 포인트 시스템입니다.

### 포인트 적립

#### 📝 게시글 작성
- **자동 적립**: 게시글 작성 시 자동으로 포인트 적립
- **관리자 설정**: 관리자가 적립 포인트 설정 가능
- **차등 적립**: 게시판별 다른 포인트 설정 가능 (옵션)

#### 💬 댓글 작성
- **댓글 포인트**: 댓글 작성 시 포인트 적립 (옵션)
- **활동 장려**: 적극적인 커뮤니티 참여 유도

### 포인트 차감

#### 🗑️ 게시글 삭제
- **자동 차감**: 게시글 삭제 시 적립된 포인트 자동 차감
- **악용 방지**: 반복적인 작성/삭제로 포인트 쌓기 방지

### 포인트 관리

#### 📊 포인트 내역
- **상세 기록**: 모든 포인트 적립/차감 내역 기록
- **날짜별 조회**: 날짜별로 포인트 내역 확인
- **사유 표시**: 포인트 변동 사유 명확히 표시

#### ⚙️ 관리자 설정
- **ON/OFF**: 포인트 시스템 활성화/비활성화
- **포인트 설정**: 게시글/댓글당 적립 포인트 설정
- **수동 지급**: 관리자가 직접 포인트 지급/차감 가능

---

## 🔌 플러그인 시스템

MicroBoard는 강력한 훅(Hook) 기반 플러그인 시스템을 제공합니다.

### 플러그인 구조

#### 📁 플러그인 디렉토리
```
/plugin
  /your_plugin_name
    - plugin.php (메인 플러그인 파일)
    - config.json (플러그인 설정)
    - README.md (플러그인 설명)
```

### 훅 시스템

#### 🎯 이벤트 훅
MicroBoard는 다양한 시점에 훅을 실행합니다:

- `before_write`: 게시글 작성 전
- `after_write`: 게시글 작성 후
- `before_delete`: 게시글 삭제 전
- `after_delete`: 게시글 삭제 후
- `before_comment`: 댓글 작성 전
- `after_comment`: 댓글 작성 후
- `before_login`: 로그인 전
- `after_login`: 로그인 후

#### 📌 플러그인 등록
```php
// plugin.php 예제
add_event('after_write', function($post_data) {
    // 게시글 작성 후 실행될 코드
    error_log("New post created: " . $post_data['title']);
}, 10); // 우선순위 10
```

### 플러그인 기능

#### ⚙️ 플러그인 관리
- **자동 로드**: `/plugin` 폴더의 플러그인 자동 인식
- **활성화/비활성화**: 관리자 페이지에서 플러그인 ON/OFF
- **게시판별 적용**: 특정 게시판에만 플러그인 적용 가능
- **우선순위**: 여러 플러그인의 실행 순서 제어

#### 🛠️ 플러그인 예제
```php
<?php
/**
 * Plugin Name: Hello World
 * Description: Simple example plugin
 * Version: 1.0.0
 */

// 게시글 작성 후 로그 남기기
add_event('after_write', function($post_data) {
    $log = "[" . date('Y-m-d H:i:s') . "] ";
    $log .= "New post: " . $post_data['title'];
    file_put_contents(__DIR__ . '/log.txt', $log . PHP_EOL, FILE_APPEND);
});

// 댓글 작성 시 알림
add_event('after_comment', function($comment_data) {
    // 이메일 알림, 푸시 알림 등 구현
    notify_admin($comment_data);
});
?>
```

---

## 🌍 다국어 지원

MicroBoard는 글로벌 서비스를 위한 완벽한 다국어 지원을 제공합니다.

### 지원 언어

#### 🇰🇷 한국어 (Korean)
- 완벽한 한국어 번역
- 한국식 날짜/시간 형식
- 한국 서비스에 최적화

#### 🇺🇸 영어 (English)
- 네이티브 수준의 영어 번역
- 국제 표준 날짜/시간 형식
- 글로벌 서비스 지원

#### 🇯🇵 일본어 (Japanese)
- 자연스러운 일본어 번역
- 일본식 경어 표현
- 일본 서비스 최적화

#### 🇨🇳 중국어 (Chinese)
- 정확한 중국어 번역 (간체)
- 중국식 표현 방식
- 중국 서비스 지원

### 다국어 기능

#### 🔄 자동 언어 감지
- **브라우저 언어**: 사용자 브라우저 설정 자동 인식
- **IP 기반**: IP 주소로 국가 판별 (옵션)
- **쿠키 저장**: 선택한 언어 자동 저장

#### 🎛️ 언어 전환
- **언어 선택기**: 모든 페이지에 언어 선택 메뉴
- **즉시 전환**: 페이지 새로고침 없이 언어 변경
- **URL 파라미터**: `?lang=ko` 형식으로 언어 지정

#### 📝 번역 관리
- **언어 파일**: `/lang/` 폴더에 언어별 PHP 파일
- **쉬운 추가**: 새로운 언어 파일 추가만으로 언어 확장
- **오버라이드**: 특정 문구만 커스터마이징 가능

---

## 👨‍💼 관리자 기능

강력하고 직관적인 관리자 페이지를 제공합니다.

### 대시보드

#### 📊 통계
- **회원 통계**: 총 회원 수, 신규 가입자, 활성 회원
- **게시글 통계**: 총 게시글 수, 일별 작성 수
- **방문자 통계**: 일일 방문자 수, 페이지뷰
- **시스템 정보**: 서버 상태, 디스크 사용량

### 회원 관리

#### 👥 회원 목록
- **전체 회원 조회**: 가입일순, 이름순 정렬
- **상세 정보**: 각 회원의 활동 내역 및 포인트
- **일괄 작업**: 여러 회원 동시 관리

#### 🔧 회원 제어
- **등급 변경**: 회원 등급 일괄 또는 개별 변경
- **차단/해제**: 문제 회원 계정 차단 및 해제
- **삭제**: 회원 및 관련 데이터 완전 삭제
- **포인트 관리**: 포인트 수동 지급/차감

### 게시판 관리

#### 📋 게시판 설정
- **게시판 생성**: 새로운 게시판 생성
- **권한 설정**: 읽기/쓰기 권한 레벨 설정
- **스킨 선택**: 게시판별 다른 스킨 적용
- **목록 개수**: 페이지당 표시할 게시글 수 설정

#### 🎨 스킨 관리
- **스킨 목록**: 설치된 스킨 목록 조회
- **미리보기**: 스킨 적용 전 미리보기
- **설정**: 스킨별 세부 옵션 설정

### OAuth 관리

#### 🔐 OAuth 설정
- **Google 설정**: Client ID, Secret 입력 및 활성화
- **LINE 설정**: Channel ID, Secret 관리
- **Apple 설정**: Team ID, Key ID, Private Key 관리
- **상태 확인**: 각 OAuth 연동 상태 실시간 확인

### 시스템 설정

#### ⚙️ 기본 설정
- **사이트 제목**: 사이트 이름 및 설명
- **관리자 이메일**: 시스템 알림 수신 이메일
- **기본 언어**: 사이트 기본 언어 설정
- **타임존**: 서버 시간대 설정

#### 💰 포인트 설정
- **포인트 사용**: 포인트 시스템 ON/OFF
- **글 작성 포인트**: 게시글 작성 시 지급 포인트
- **댓글 포인트**: 댓글 작성 시 지급 포인트
- **로그인 포인트**: 일일 로그인 보너스 포인트

### 정책 관리

#### 📜 정책 페이지
- **이용약관**: 서비스 이용약관 작성/수정
- **개인정보처리방침**: 개인정보 처리 방침 관리
- **WYSIWYG 에디터**: 정책 내용 편집기
- **버전 관리**: 정책 변경 이력 보관

---

## 🔒 보안 기능

MicroBoard는 최신 보안 기술로 사이트를 보호합니다.

### 인증 보안

#### 🔐 비밀번호 보안
- **bcrypt 암호화**: 업계 표준 비밀번호 해싱
- **솔트(Salt)**: 자동 솔트 생성으로 레인보우 테이블 공격 방지
- **재해싱**: 비밀번호 변경 시 자동 재해싱

#### ⏰ 세션 보안
- **세션 타임아웃**: 30분 비활성 시 자동 로그아웃
- **세션 재생성**: 로그인 시 세션 ID 재생성
- **Secure Cookie**: HTTPS 환경에서 Secure 플래그 사용

### 입력 보안

#### 🛡️ SQL Injection 방지
- **PDO Prepared Statements**: 모든 쿼리에 Prepared Statement 사용
- **입력값 검증**: 모든 사용자 입력 서버 측 검증
- **타입 체크**: 숫자/문자열 등 데이터 타입 엄격 검증

#### 🚫 XSS 방지
- **htmlspecialchars**: 출력 시 모든 HTML 이스케이프
- **DOM Purify**: 클라이언트 측 XSS 방지
- **Content Security Policy**: CSP 헤더로 스크립트 삽입 차단

#### 🔒 CSRF 방지
- **CSRF 토큰**: 모든 폼에 CSRF 토큰 자동 생성
- **토큰 검증**: 폼 제출 시 토큰 유효성 검증
- **SameSite Cookie**: 쿠키 SameSite 속성 설정

### 파일 보안

#### 📁 업로드 보안
- **파일 타입 검증**: 화이트리스트 기반 파일 확장자 검증
- **파일 크기 제한**: 최대 업로드 크기 제한
- **파일명 난수화**: 업로드 파일명 자동 변경
- **실행 방지**: 업로드 디렉토리 스크립트 실행 차단

### 접근 제어

#### 🚪 권한 관리
- **레벨 기반 접근**: 회원 등급별 접근 제어
- **관리자 인증**: 관리 페이지 이중 인증
- **IP 화이트리스트**: 특정 IP만 관리자 접근 허용 (옵션)

---

## 📦 추가 기능

### 📮 이메일 알림 (옵션)
- 회원 가입 환영 메일
- 댓글 알림 메일
- 비밀번호 재설정 메일
- 관리자 알림 메일

### 🔍 SEO 최적화
- 메타 태그 자동 생성
- Sitemap 자동 생성
- Robots.txt 관리
- URL 구조 최적화

### 📊 로깅
- 에러 로그 기록
- 접속 로그 기록
- 관리자 작업 로그
- 로그 보관 및 삭제 정책

---

## 🚀 성능 최적화

### ⚡ 캐싱
- 데이터베이스 쿼리 캐싱
- 페이지 캐싱 (옵션)
- 정적 파일 캐싱

### 📉 최적화
- 이미지 자동 압축
- CSS/JS 압축 및 병합
- Lazy Loading
- CDN 지원

---

## 📱 모바일 지원

### 📲 반응형 디자인
- **완벽한 반응형**: 모든 화면 크기에 최적화
- **터치 최적화**: 터치 인터페이스 지원
- **모바일 메뉴**: 모바일 전용 네비게이션
- **빠른 로딩**: 모바일 환경 최적화

---

## 🔄 업데이트 및 마이그레이션

### 📥 업데이트
- **자동 업데이트 확인**: 새 버전 자동 감지
- **원클릭 업데이트**: 버튼 하나로 업데이트
- **백업 자동 생성**: 업데이트 전 자동 백업

### 🔄 마이그레이션
- **데이터베이스 마이그레이션**: 버전별 DB 스키마 자동 업데이트
- **설정 보존**: 기존 설정 및 데이터 유지
- **롤백 지원**: 문제 발생 시 이전 버전으로 복구

---

## 📞 지원 및 커뮤니티

### 💬 지원
- **GitHub Issues**: 버그 리포트 및 기능 제안
- **문서**: 상세한 온라인 문서
- **FAQ**: 자주 묻는 질문

### 🤝 커뮤니티
- **GitHub Discussions**: 커뮤니티 토론
- **기여 가이드**: 오픈소스 기여 방법
- **플러그인 공유**: 커뮤니티 플러그인

---

## 📄 라이선스

MicroBoard는 [MIT 라이선스](LICENSE)로 배포됩니다.

---

**MicroBoard v1.0.0** | [Documentation](https://mytajimilife-coder.github.io/microboard/) | [GitHub](https://github.com/mytajimilife-coder/microboard)
