# MicroBoard 기능 가이드 (Features Guide)

> **버전:** 1.0.0  
> **최종 업데이트:** 2025-12-15

## 📋 목차

1. [핵심 기능](#핵심-기능)
2. [게시판 및 페이지 관리](#게시판-및-페이지-관리)
3. [권한 및 회원 시스템](#권한-및-회원-시스템)
4. [알림 및 커뮤니티](#알림-및-커뮤니티)
5. [운영 도구 (Admin Tools)](#운영-도구-admin-tools)
6. [보안 아키텍처](#보안-아키텍처)
7. [SEO 및 분석 도구](#seo-및-분석-도구)
8. [다국어 지원](#다국어-지원)
9. [플러그인 시스템](#플러그인-시스템)

---

## 핵심 기능

### 🎨 테마 및 디자인

- **다크 모드 지원**: 라이트/다크 테마 자동 전환
- **반응형 디자인**: 모바일, 태블릿, 데스크톱 완벽 지원
- **커스텀 배경**: 색상, 그라데이션, 이미지 배경 설정
- **로고 및 파비콘**: 사이트 브랜딩 커스터마이징

### 📝 게시판 시스템

- **무제한 게시판 생성**: 원하는 만큼 게시판 생성 가능
- **스킨 시스템**: 게시판별 독립적인 스킨 적용
- **에디터 설정**: 게시판별로 WYSIWYG 에디터 사용/미사용 선택
- **댓글 시스템**: 게시판별 댓글 기능 활성화/비활성화
- **파일 첨부**: 다중 파일 업로드 지원

---

## 게시판 관리

### 게시판 생성 및 설정

관리자 페이지 → 게시판 관리에서 다음 항목을 설정할 수 있습니다:

#### 기본 설정
- **게시판 이름**: 게시판 제목 설정
- **테이블명**: 영문, 숫자, 언더스코어만 사용
- **관리자**: 게시판 관리자 지정
- **목록 수**: 페이지당 표시할 게시글 수
- **스킨**: 기본(default) 또는 모던(modern) 선택

#### 기능 설정
- ✅ **댓글 사용**: 댓글 기능 활성화
- ✅ **에디터 사용**: Summernote WYSIWYG 에디터 사용
- ✅ **통합검색 반영**: 통합검색 결과에 포함 여부

#### 권한 설정
- **목록 보기 권한**: 레벨 0~10 (0: 비회원 포함, 1: 회원만, 10: 관리자만)
- **읽기 권한**: 레벨 1~10
- **쓰기 권한**: 레벨 1~10

#### 플러그인 설정
- 게시판별로 활성화할 플러그인 선택

---

## 페이지 관리 (Page Management)

MicroBoard 내에서 정적인 페이지(소개, 약관 등)를 직접 생성하고 관리할 수 있습니다.

### 주요 기능
- **페이지 생성**: 관리자 페이지에서 제목, 내용, URL Slug 설정
- **권한 설정**: 페이지별로 읽기 권한 레벨 설정 (비회원, 회원전용 등)
- **변수 사용**: 페이지 내용 안에 `{{변수명}}` 형태로 동적 데이터 삽입 가능
- **URL 접근**: `page.php?id=슬러그` 형태로 접근

### 커스텀 변수 (Custom Variables)
- 관리자 설정 페이지에서 나만의 변수를 정의할 수 있습니다.
- **예시**: `{{twitter_url}}` 변수를 만들고 값으로 링크를 지정하면, 페이지나 게시물 본문 어디서든 `{{twitter_url}}`을 입력했을 때 해당 링크로 자동 치환됩니다.
- **기본 제공 변수**:
  - `{{site_title}}`: 사이트 제목
  - `{{copyright}}`: 저작권 문구
  - `{{username}}`: 현재 사용자 아이디
  - `{{nickname}}`: 현재 사용자 닉네임
  - `{{year}}`: 현재 연도

---

## 권한 시스템

### 회원 레벨 시스템

MicroBoard는 10단계 레벨 시스템을 사용합니다:

| 레벨 | 설명 | 기본 권한 |
|------|------|----------|
| 0 | 비회원 | 목록 보기만 가능 (설정 시) |
| 1 | 일반 회원 | 기본 읽기/쓰기 |
| 2-9 | 등급별 회원 | 관리자가 설정한 권한 |
| 10 | 관리자 | 모든 권한 |

### 게시판별 권한 설정

각 게시판마다 독립적으로 권한을 설정할 수 있습니다:

#### 1. 목록 보기 권한 (List Permission)
- 게시판 목록을 볼 수 있는 최소 레벨
- 레벨 0: 비회원 포함 모두 가능
- 레벨 1: 로그인한 회원만 가능
- 레벨 10: 관리자만 가능

#### 2. 읽기 권한 (Read Permission)
- 게시글 내용을 읽을 수 있는 최소 레벨
- 레벨 1~10 설정 가능

#### 3. 쓰기 권한 (Write Permission)
- 게시글을 작성할 수 있는 최소 레벨
- 레벨 1~10 설정 가능

### 권한 적용 예시

**공개 게시판 (누구나 볼 수 있음)**
- 목록: 레벨 0 (비회원 포함)
- 읽기: 레벨 1 (회원만)
- 쓰기: 레벨 1 (회원만)

**회원 전용 게시판**
- 목록: 레벨 1
- 읽기: 레벨 1
- 쓰기: 레벨 1

**VIP 게시판**
- 목록: 레벨 5
- 읽기: 레벨 5
- 쓰기: 레벨 5

**관리자 전용 게시판**
- 목록: 레벨 10
- 읽기: 레벨 10
- 쓰기: 레벨 10

---

## 검색 기능

### 통합검색 (Integrated Search)

모든 게시판을 한 번에 검색할 수 있는 기능입니다.

#### 특징
- 🔍 모든 게시판 동시 검색
- 📌 제목과 내용 모두 검색
- 🎨 검색어 하이라이트 표시
- 📄 페이지네이션 지원 (20개씩)
- 🏷️ 게시판별 태그 표시

#### 사용 방법
1. 헤더 메뉴에서 "🔍 통합검색" 클릭
2. 검색어 입력
3. 검색 버튼 클릭 또는 Enter

#### 검색 제외 설정
관리자는 특정 게시판을 통합검색에서 제외할 수 있습니다:
- 관리자 페이지 → 게시판 관리 → 게시판 편집
- "통합검색 반영" 체크박스 해제

### 게시판 내 검색 (Board Search)

각 게시판에서 독립적으로 검색할 수 있습니다.

#### 검색 옵션
- **제목**: 게시글 제목에서만 검색
- **내용**: 게시글 내용에서만 검색
- **작성자**: 작성자 이름으로 검색
- **전체** (기본값): 제목 + 내용 통합 검색

#### 사용 방법
1. 게시판 목록 페이지 상단의 검색 폼 사용
2. 검색 필드 선택 (제목/내용/작성자)
3. 검색어 입력 후 🔍 버튼 클릭

---

## SEO 및 분석 도구

관리자 페이지 → SEO 설정에서 다양한 SEO 및 분석 도구를 간편하게 설정할 수 있습니다.

### Bing Webmaster Tools
- Bing 검색엔진 등록 및 인증
- 메타 태그 content 값만 입력

### Google Search Console
- Google 검색엔진 등록 및 인증
- 메타 태그 content 값만 입력

### Google Analytics (GA4)
- 방문자 통계 및 분석
- 측정 ID 입력 (G-XXXXXXXXXX)
- 자동으로 추적 스크립트 삽입

### Google Tag Manager
- 태그 관리 시스템
- 컨테이너 ID 입력 (GTM-XXXXXXX)
- Head와 Body 모두 자동 삽입

### Google AdSense
- 광고 수익화
- 클라이언트 ID 입력 (ca-pub-XXXXXXXXXXXXXXXX)
- 자동으로 AdSense 스크립트 삽입

### 커스텀 스크립트

#### 헤더 스크립트
- `<head>` 태그 안에 추가할 스크립트/메타 태그
- 추가 SEO 태그, 폰트, CSS 등

#### 푸터 스크립트
- `</body>` 태그 직전에 추가할 스크립트
- 채팅 위젯, 분석 도구 등

---

## 회원 관리

### 회원 등급 시스템

#### 레벨 관리
- 관리자 페이지 → 회원 관리에서 레벨 변경
- 레벨 1~10 설정 가능
- 관리자(admin)는 자동으로 레벨 10

#### 회원 상태 관리
- **정상**: 일반 활동 가능
- **차단**: 로그인 불가, 차단 사유 표시
- **탈퇴**: 회원 탈퇴 처리

### 포인트 시스템

#### 포인트 설정
- 관리자 페이지 → 환경설정 → 포인트 설정
- 포인트 사용 여부 설정
- 글 작성 시 지급 포인트 설정 (음수 가능)

#### 포인트 지급
- 글 작성: 설정한 포인트 지급
- 글 삭제: 지급된 포인트 회수

### OAuth 소셜 로그인
- Google, LINE, Apple 계정을 이용한 간편 로그인 및 회원가입
- 관리자 패널에서 각 서비스별 연동 여부 및 API 키 관리 가능

---

## 알림 및 커뮤니티

### 🔔 실시간 알림 시스템
- **활동 알림**: 내 게시글에 댓글이나 추천(좋아요)이 달리면 즉시 알림 전송
- **시스템 알림**: 관리자의 공지, 레벨 변경, 포인트 조정 등의 시스템 메시지 수신
- **사용자 인터페이스**: 읽지 않은 알림 개수 표시 및 알림 센터를 통한 통합 관리

---

## 운영 도구 (Admin Tools)

운영자의 효율적인 사이트 관리를 위한 핵심 도구 모음입니다.

### 💾 백업 및 복구
- **전체 데이터베이스 백업**: 현 시점의 DB 상태를 SQL 파일로 즉시 저장
- **관리 및 다운로드**: 백업 파일 리스트 조회, 직접 다운로드 및 불필요한 파일 삭제
- **간편한 복구**: 업로드 또는 목록 선택을 통한 이전 시점 데이터 복원 기능

### 📋 활동 로그 및 감사
- **관리자 로그**: 설정 변경, 게시판 생성, 회원 제재 등 관리자가 수행한 모든 액션 기록
- **로그인 감사**: 모든 로그인 시도를 기록하여 보안 사고 분석 및 추적 지원
- **검색 및 필터링**: 날짜별, 사용자별, 행위별로 필요한 로그를 빠르게 탐색

### 📁 자원 및 자산 관리
- **파일 매니저**: 서버에 업로드된 파일의 총량 확인 및 종류별 통계 정보 제공
- **고아 파일 자동 정리**: DB 상에 존재하지 않는 불필요한 이미지 및 첨부파일을 스캔하여 서버 용량 최적화

### 💰 포인트 및 회원 등급 가이드
- **포인트 수동 조정**: 관리자가 직접 회원의 포인트를 특정 금액만큼 차감하거나 지급 가능
- **포인트 변동 로그**: 모든 포인트의 증감 이력을 영구적으로 로그에 기록
- **자동 레벨업 설정**: 누적 포인트에 따라 자동으로 회원 레벨이 승급되도록 운영 규칙 설정

### 🚧 시스템 유지보수 설정
- **사이트 점검 모드**: 서버 작업 시 일반 사용자 접근을 차단하고 작업 안내 페이지 노출
- **금지어(NG워드) 관리**: 쉼표로 구분하여 등록된 단어들을 게시물 및 댓글에서 자동 마스킹(`***`)

---

---

## 보안 아키텍처

### 🛡️ 기초 보안 (Fundamental Security)
- **CSRF 보호**: 모든 폼 요청에 대해 고유 토큰을 검증합니다.
- **XSS 방지**: 사용자 입력을 정교하게 필터링하여 악성 스크립트 실행을 차단합니다.
- **SQL Injection 방지**: PDO Prepared Statements를 통해 데이터베이스 쿼리를 안전하게 처리합니다.
- **파일 업로드 보안**: MIME 타입 검증, 파일명 랜덤화, 실행 파일 업로드 차단을 통해 서버를 보호합니다.

### 🔐 인증 및 접근 제약 (Authentication & Access)
- **2단계 인증 (2FA)**: 이메일 또는 OTP 앱을 통한 강력한 2차 인증을 지원합니다.
- **무차별 대입 공격 방어**: 반복된 로그인 실패 시 해당 IP를 자동 차단(Lockout)합니다.
- **로그인 보안 감사**: 모든 로그인 시도를 기록하며 IP 및 기기 정보를 추적합니다.
- **관리자 IP 화이트리스트**: 특정 IP에서만 관리자 페이지 접근을 허용하여 관리자 계정을 2중 보호합니다.

### 🌐 시스템 수준 보호
- **HTS/HSTS 강제**: 안전한 HTTPS 통신을 강제하고 클릭재킹을 방지하는 보안 헤더를 전송합니다.
- **IP 대역 차단**: 부적절한 접근을 시도하는 특정 IP 대역을 영구적 또는 시간 한정으로 격리합니다.

---

## 다국어 지원

### 지원 언어
- 🇰🇷 한국어 (Korean)
- 🇺🇸 영어 (English)
- 🇯🇵 일본어 (Japanese)
- 🇨🇳 중국어 (Chinese)

### 자동 언어 감지
- 브라우저 언어 자동 감지
- 사용자 선택 언어 세션 저장

### 언어 전환
- 헤더의 국기 아이콘 클릭
- 페이지 새로고침 없이 즉시 전환

### 언어 파일 위치
```
lang/
├── ko.php  # 한국어
├── en.php  # 영어
├── ja.php  # 일본어
└── zh.php  # 중국어
```

---

## 플러그인 시스템

### 플러그인 구조

```
plugin/
└── example_plugin/
    ├── index.php       # 플러그인 메인 파일
    └── config.json     # 플러그인 설정 (선택사항)
```

### 사용 가능한 훅 (Hooks)

- `before_write`: 글 작성 전
- `after_write`: 글 작성 후
- `before_login`: 로그인 전
- `after_login`: 로그인 후
- `board_head`: 게시판 헤더
- `before_logo_display`: 로고 표시 전

### 플러그인 예제

```php
<?php
// plugin/example_plugin/index.php

// 글 작성 후 이메일 알림
add_event('after_write', function($post_data) {
    $to = 'admin@example.com';
    $subject = '새 글 작성: ' . $post_data['title'];
    $message = $post_data['writer'] . '님이 글을 작성했습니다.';
    mail($to, $subject, $message);
});

// 로그인 후 포인트 지급
add_event('after_login', function($user_data) {
    insert_point($user_data['mb_id'], 10, '로그인 보너스');
});
?>
```

---

## 데이터베이스 업데이트

새로운 기능을 사용하려면 다음 스크립트를 실행하세요:

### 권한 시스템
```
http://your-domain/update_db_permissions.php
```

### 에디터 설정
```
http://your-domain/update_db_editor.php
```

### 통합검색
```
http://your-domain/update_db_search.php
```

### SEO 설정
```
http://your-domain/update_db_seo.php
```

---

## 문제 해결

### 권한 오류
- 게시판 관리 페이지 접속 시 자동으로 스키마 업데이트
- 또는 해당 업데이트 스크립트 직접 실행

### 검색 결과 없음
- 게시판 설정에서 "통합검색 반영" 확인
- 게시판 테이블이 정상적으로 생성되었는지 확인

### SEO 태그 미표시
- SEO 설정 페이지에서 값 입력 확인
- 페이지 소스 보기로 태그 삽입 확인

---

## 추가 리소스

- [GitHub Repository](https://github.com/mytajimilife-coder/microboard)
- [GitHub Pages 문서](https://mytajimilife-coder.github.io/microboard/)
- [Issue 리포트](https://github.com/mytajimilife-coder/microboard/issues)

---

**MicroBoard v1.0.0** - Made with ❤️
